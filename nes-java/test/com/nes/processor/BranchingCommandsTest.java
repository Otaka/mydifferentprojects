package com.nes.processor;

import com.nes.NesAbstractTst;
import org.junit.Test;

/**
 *
 * @author Dmitry
 */
public class BranchingCommandsTest extends NesAbstractTst {

    @Test
    public void testBne() {
        //lda #$5;bne notNull;ldx #$1;jmp endif;notNull:;ldx #$2;endif:;lda #$0;bne notNull2;ldy #$1;jmp endif2;notNull2:;ldy #$2;endif2:
        int[] b = new int[]{0xa9, 0x05, 0xd0, 0x05, 0xa2, 0x01, 0x4c, 0x0b, 0x06, 0xa2, 0x02,
            0xa9, 0x00, 0xd0, 0x05, 0xa0, 0x01, 0x4c, 0x16, 0x06, 0xa0, 0x02};
        testAlu(b, 0x0, 0x2, 0x1, 0xfd, 0x617, false, false, false, false);
    }

    @Test
    public void testBcc() {
        //sec;bcc notCarry;ldx #$1;jmp endif;notCarry:;ldx #$2;endif:;clc;bcc notCarry2;ldy #$1;jmp endif2;notCarry2:;ldy #$2;endif2:
        int[] b = new int[]{0x38, 0x90, 0x05, 0xa2, 0x01, 0x4c, 0x0a, 0x06, 0xa2, 0x02, 0x18, 0x90, 0x05, 0xa0, 0x01, 0x4c, 0x14, 0x06, 0xa0, 0x02};
        testAlu(b, 0x0, 0x1, 0x2, 0xfd, 0x615, false, false, false, false);
    }

    @Test
    public void testBcs() {
        //sec;bcs notCarry;ldx #$1;jmp endif;notCarry:;ldx #$2;endif:;clc;bcs notCarry2;ldy #$1;jmp endif2;notCarry2:;ldy #$2;endif2:
        int[] b = new int[]{0x38, 0xb0, 0x05, 0xa2, 0x01, 0x4c, 0x0a, 0x06, 0xa2, 0x02, 0x18, 0xb0, 0x05, 0xa0, 0x01, 0x4c, 0x14, 0x06, 0xa0, 0x02};
        testAlu(b, 0x0, 0x2, 0x1, 0xfd, 0x615, false, false, false, false);
    }
}
