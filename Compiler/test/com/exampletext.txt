(package com.main)

(deff @noheader @noreturn main()(#
    (goto process)
)

(defv bytesPerSector:short 512)
(defv sectorsPerCluster:byte 512)


(deff @noheader @noreturn process()(#
    (asm cli)
    (asm hlt)
))

(deff resetFloppy()(#
    (loop (#
        (bindreg functionNumber ah 0)
        (bindreg driveNumber    dl 0)
        (asm int 0x13)
        (if (isCarryFlag)
            (break)
        )
    )
))

(deff resetFloppy()(#
    (loop (#
        (bindreg functionNumber ah 0)
        (bindreg driveNumber    dl 0)
        (asm int 0x13)
        (if (isCarryFlag)
            (break)
        )
    )
))





